<% if @sites.empty? %>
    <div class="alert alert-warning">
      <%= t(".no-site-found") %>
    </div>
<% else %>
  <div class="pull-left"> <%= info_page @sites %> </div>
  <div class="pull-right"> <%= paginate @sites, remote: true %> </div>
  <div class="clearfix"></div>

  <table class='table table-striped'>
    <thead>
      <tr>
        <th class='site-name'><%= sortable 'name', t(".name") %></th>
        <th><%= sortable 'title', t(".title") %></th>
        <th><%= sortable 'description', t(".description") %></th>
        <th>Status</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @sites.each do |site| %>
        <tr class="<%= site.status %> <%= 'text-danger' if site.status == 'inactive' %>">
          <td> <%= link_to site.name, site_url(subdomain: site) %> </td>
          <td> <%= site.title %> </td>
          <td> <%= site.description %> </td>
          <td><%= t(".#{site.status}") %></td>
          <td class="text-right">
            <% if current_user && current_user.is_admin %>
              <% if site.status == 'active' %>
                <%= link_to icon('remove-circle', text: t(".deactivate")), update_subsite_admin_path(site.id, site: {status: 'inactive'}), class: "action-link", method: :patch, data: {confirm: t('are_you_sure')} %>
              <% else %>
                <%= link_to icon('ok-circle', text: t(".activate")), update_subsite_admin_path(site.id, site: {status: 'active'}), class: "action-link", method: :patch, data: {confirm: t('are_you_sure')} %>
              <% end %>
              <%= link_to icon('trash', text: t(".delete")), destroy_subsite_admin_path(site.id), class: "action-link", method: :delete, data: {confirm: t('are_you_sure_del_item', item: site.title)} %>
              <%= link_to icon('edit', text: t(".settings")), edit_site_admin_url(subdomain: site), class: "action-link" %>
            <% end %>
            <%= link_to icon('briefcase', text: t(".dashboard")), site_admin_url(subdomain: site), class: "action-link"  if current_user && current_user.has_role_in?(site) %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="pull-left"> <%= per_page_links @sites, true, :sm %> </div>
  <div class="pull-right"> <%= paginate @sites, remote: true %> </div>
  <div class="clearfix"></div>
<% end %>
