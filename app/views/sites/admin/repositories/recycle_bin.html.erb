<% content_for :javascripts, javascript_include_tag('repositories') %>
<div class="pull-right">
  <%= link_to t(".new_archive"),
    new_site_admin_repository_path,
    class: "btn btn-success" %>
  <% with_permission(action: :destroy) do %>                                                     
    <%= link_to t(".recycle_bin"), recycle_bin_site_admin_repositories_path, class: "btn btn-inverse" %>
  <% end %>
</div>
<div class="clearfix"></div>

<% if @repositories.empty? %>
  <div style="margin-top: 10px;" class="alert">
    <%= t(".empty_recycle_bin") %>
  </div>
<% else %>
  <div id="repo_list">
    <div class="pull-left"> <%= info_page @repositories %> </div>                             
    <div class="pull-right"> <%= paginate @repositories, remote: true %> </div>               
    <div class="clearfix"></div>                                                              
                                                                                              
    <table class='table table-striped table-condensed'>                                       
        <thead>                                                                                 
            <th><%= sortable 'id', t(".archive") %></th>                                        
            <th><%= sortable 'description', t(".description") %></th>                           
            <th><%= sortable 'archive_content_type', t(".type") %></th>                         
            <th><%= sortable 'deleted_at', t(".deleted_at") %></th>                                                                           
          </thead>                                                                              
        <tbody>                                                                                 
          <% @repositories.each do |repository| %>                                              
              <tr class="<%= cycle 'odd', 'even' %>">                                             
              <td> <%= weby_file_view(repository, :thumb, "64", "64", as: :image) %> </td>
              <td> <%= repository.description %> </td>                                          
              <td> <%= repository.archive_content_type %> </td>
              <td> <%= l(repository.deleted_at, :format => :short) %> </td>
              <td>
                <%= link_to icon('trash', :action => 'destroy', :text => t('.destroy')), site_admin_repository_path(repository), method: 'delete', confirm: t('are_you_sure') %>
                <%= link_to icon('refresh', :action => 'recover', :text => t('.recover')), recover_site_admin_repository_path(repository)  %>
              </td>                                       
            </tr>                                                                               
          <% end; reset_cycle %>                                                                
          </tbody>                                                                              
        </table>                                                                                  
                                                                                                  
        <div class="pull-left"> <%= per_page_links @repositories, true, :mini  %> </div>          
        <div class="pull-right"> <%= paginate @repositories, remote: true %> </div>               
        <div class="clearfix"></div>                                                              
  </div>
<% end %>
