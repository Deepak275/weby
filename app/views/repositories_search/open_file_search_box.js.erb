var place = $(document.createElement("div"));
place.attr('id', 'file_search_box');
place.
html('<%= escape_javascript(render "repositories_search/file_search_box",
                            name: @name,
                            final_files_list: @final_files_list,
                            multiplicity: @multiplicity,
                            file_types: @file_types ) %>');


place.show();

place.dialog({ 
  width: '630px',
  height: 500,
  modal: true,
  resizable: false,
  position: ['center', 'top'],
  title: "<%= escape_javascript(params[:title]) %>",
  buttons:[{
    class: 'green-button',
    text: "<%= t('save') %>",
    click: function(){
      $(this).find('#form_select_image').submit();
    }
  },{
    class: 'red-button',
    text: "<%= t('cancel') %>",
    click: function(){
      // remove() é necessário para remover os eventos.
      // Sem o remove não funciona na segunda vez que abre o dialog
      $(this).dialog('close').remove();
    }
  }],
  open: function(event, ui){
    $('body').css('overflow','hidden');
    $('.ui-widget-overlay').css('width','100%'); 
  }, 
  close: function(event, ui){
    $('body').css('overflow','auto'); 
  } 
});

set_jquery_ui();

$(".multiselect .file-search-box").width(180);
