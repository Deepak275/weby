<fieldset>
  <legend><%= t('roles_permissions') %></legend>

  <% if check_permission(RolesController, "new") %>
    <div class="contextual">
      <p><%= link_to (t"create_param", :param => t("role")), new_role_path, :class => 'icon icon-add' %></p>
    </div>
  <% end %>

  <%= form_tag '/roles', :method => 'put' do %>
  <table class="list">
    <thead>
     <tr>
      <th><%= t"roles_permissions", :count => 2%></th>
      <% @roles.each do |role| %>
        <th><%= role.name %> [<%= link_to t('edit'), edit_role_path(role) %>, <%= link_to t('destroy'), role, :confirm => t('are_you_sure'), :method => :delete %>]</th>
        <%# role.rights.collect do |each|%>
          <%#=  each.name %>
        <%# end %>
      <% end %>
    </tr>
    </thead>
    <tbody>
      <% @rights.each do |right| %>
      <tr class="<%= cycle 'odd', 'even' %>">
        <td><%= right.name %></td>
        <% @roles.each do |role| %>
          <td>
            <%= check_box_tag "role[#{role.id}][right_ids][]", right.id, role.rights.include?(right), :id => nil %>
            <%#= check_box_tag "role[right_ids][]", right.id, role.rights.include?(right), :id => nil %>
          </td>
        <% end %>
      </tr>
      <% end; reset_cycle %>
    </tbody>
  </table>
  <p> <%= submit_tag t("save") %> </p>
  <% end %>

  <p> <%= link_to (t"list_param", :param => (t"permission", :count => 2)), :controller => "rights", :action => "index" %> </p>
</fieldset>
