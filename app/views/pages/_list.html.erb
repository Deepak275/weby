<%= paginate @pages, :remote => true %>
<%= info_page @pages %>
<%= per_page_links @pages, true %>
<table id='list' class="list">
  <thead>
    <th><%= sortable 'id' %></th>
    <th><%= sortable 'date_begin_at', t("date_param", :param => t("register"))%></th>
    <th><%= sortable 'title', t("title") %></th>
    <th><%= sortable 'author_id', t("author") %></th>
    <th><%= sortable 'category', t("category") %></th>
    <th><%= sortable 'type', t("type") %></th>
    <% if check_permission(PagesController, 'toggle_field') %>
      <th><%= t"cover" %></th>
      <th><%= t"publish" %></th>
    <% end %>
    <% if check_permission(PagesController, 'sort') %>
      <th></th>
    <% end %>
  </thead>

  <tbody>
    <% @pages.each do |page| %>
      <tr id="sort_page_<%= page.id %>">
        <td><%= page.id %></td>
        <td><%= l page.created_at, :format => :short %></td>
        <td><%= link_to page.title, site_page_path(@site,page) %></td>
        <td><%= page.user.first_name ? ("#{page.user.first_name} #{page.user.last_name}") : page.user.login %></td>
        <td><%= page.category %></td>
        <td><%= t"#{page.type.downcase}.one" %></td>
        <% if check_permission(PagesController, [:toggle_field]) %>
          <td align="center"><%= raw toggle_field(page, "front") %></td>
          <td align="center"><%= raw toggle_field(page, "publish") %></td>
        <% end %>
        <%# Verificar se o make_menu a seguir estÃ¡ correto %>
        <%#= make_menu(page, :except => "show") %>
        <% if check_permission(PagesController, 'sort') %>
          <td>
            <span class='handle icon icon-drag'><%= t("move") %></span>
          </td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
