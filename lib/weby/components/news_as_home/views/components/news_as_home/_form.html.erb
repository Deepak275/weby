<%# ======================================== %>
<% def page_title_for(comp)
  if comp.page
    return comp.page.by_locale(@current_locale).title
  else
    return t('.none_selected')
  end
end %>

<%= text_field_tag :page_title, page_title_for(component), disabled: true, id: 'page_title_for_component' %>
<%= content_tag :button, t('.select'), id: 'btn_select_news', onclick: 'select_page(); return false' %>
<%= content_tag :div, '', id: 'page_list', title: t('.select') %>

<%= f.input :page_id, as: :hidden %>


<%# ======================================== %>
<%= javascript_tag do %>
  /**
   * Abre um popup para seleção de páginas
   */
  function select_page() {
    $('#page_list').dialog({
      width: '700',
      height: '400'
    });
    
    $.get("<%= list_published_site_pages_path %>", {'published_only':false}, function(){}, 'script');
  }

  /**
   * Ao selecionar a notícia, cria um input com o id da noticia selecionada
   */
  function selected (id, title) {
    $('#news_as_home_component_page_id').val(id);
    $('#page_title_for_component').val(title);
    $('#page_list').dialog('close');
  }

<% end %>